<mat-card class="task-form-card">
  <mat-card-content>
    <form #taskForm="ngForm">
      <div class="form-container">
        <mat-form-field appearance="outline" class="task-input">
          <mat-label>Task Title</mat-label>
          <input
            matInput
            [(ngModel)]="title"
            name="title"
            placeholder="Enter task title"
            #titleInput="ngModel"
            required
            [ngModelOptions]="{ updateOn: 'change' }"
          />
          <mat-error *ngIf="titleInput.invalid && titleInput.touched">
            This field is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="task-input">
          <mat-label>Description</mat-label>
          <textarea
            matInput
            [(ngModel)]="description"
            name="description"
            placeholder="Enter task description"
          ></textarea>
        </mat-form-field>

        <div class="row-fields">
          <mat-form-field appearance="outline" class="task-input small-input">
            <mat-label>Priority</mat-label>
            <mat-select [(ngModel)]="priority" name="priority">
              <mat-option value="Low">Low</mat-option>
              <mat-option value="Medium">Medium</mat-option>
              <mat-option value="High">High</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="task-input small-input">
            <mat-label>Deadline</mat-label>
            <input
              matInput
              [matDatepicker]="picker"
              [(ngModel)]="deadline"
              name="deadline"
              placeholder="Select deadline"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>
      </div>
    </form>
  </mat-card-content>

  <mat-card-actions align="end" class="task-buttons">
    <button
      mat-raised-button
      color="primary"
      (click)="saveTask(taskForm)"
      [disabled]="!titleInput.valid"
    >
      {{ taskToEdit ? "Update Task" : "Add Task" }}
    </button>
    <button
      *ngIf="taskToEdit"
      mat-button
      color="warn"
      (click)="resetForm(taskForm)"
    >
      Cancel
    </button>
  </mat-card-actions>
</mat-card>
